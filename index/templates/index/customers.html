<h1>Customers</h1>

<table>
  <tr>
    <th colspan="3"></th>
    {% for rate in rate_types %}
        <th colspan="2">{{rate}}</th>
    {% endfor %}
  </tr>
  <tr>
    <th>Customer Name</th>
    <th>Customer Address</th>
    <th>Meter Number</th>
    {% for rate in rate_types %}
        <th>Reading 1</th>
        <th>Reading 2</th>
    {% endfor %}
  </tr>

  {% for customer in customers %}
  <tr>
    <td>{{customer.name}}</td>
    <td>{{customer.address}}</td>
    <td>{{customer.meter_number}}</td>
    {% for rate_name in rate_types %}
      {% if rate_name in customer.rates %}
        {% for key, values in customer.rates.items %}
          {% if key == rate_name %}
            {% for value in values %}
              <td>{{value}}</td>
            {% endfor %}
          {% endif %}
        {% endfor %}
      {% else %}
      <td>False</td>
      <td>False</td>
      {% endif %}
    {% endfor %}
  </tr>
  {% endfor %}
</table>

<form method="POST">
  {% csrf_token %}
  <button type="submit">Calculate Rates</button>
</form>

